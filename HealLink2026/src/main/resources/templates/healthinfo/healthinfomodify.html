<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>HealLink - 정보 수정</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <!--  공용 CSS : 글로벌, 헤더, 푸터, 본문  2026-01-20 -->
    <link rel="stylesheet" th:href="@{/css/global.css}">
    <link rel="stylesheet" th:href="@{/css/mainpage/header.css}">
    <link rel="stylesheet" th:href="@{/css/mainpage/footer.css}">
    <link rel="stylesheet" th:href="@{/css/mainpage/content.css}">

    <style>
        .modify-container { max-width: 900px; margin: 40px auto; }
        .form-card { border-radius: 12px; border: none; box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
        .btn-update { background-color: #153f8f; color: white; padding: 10px 25px; font-weight: 500; }
        .btn-update:hover { background-color: #0d2a63; color: white; }
        .form-label { font-weight: 600; color: #333; margin-bottom: 8px; }
    </style>

</head>

<body>
<!--  헤더  -->
<div th:replace="~{mainpage/header :: header}"></div>

<div class="container modify-container">
    <div class="notice mb-4">
        <h3 style="color: #153f8f; font-weight: bold;">건강 정보 수정</h3>
        <p class="text-muted">게시글의 내용을 수정하고 업데이트합니다.</p>
    </div>

    <div class="card form-card">
        <div class="card-body p-5">
            <form id="modifyForm">
                <input type="hidden" id="healthinfoId" th:value="${healthInfo.id}">

                <div class="form-group mb-4">
                    <label for="title" class="form-label">제목</label>
                    <input type="text" class="form-control form-control-lg" id="title" th:value="${healthInfo.title}" required>
                </div>

                <div class="row mb-4">
                    <div class="col-md-6">
                        <label class="form-label">카테고리</label><br>
                        <div class="btn-group-toggle" data-toggle="buttons">
                            <div class="form-check form-check-inline mr-3">
                                <input class="form-check-input" type="radio" name="category" id="cat1" value="PUBLIC_CENTER"
                                       th:checked="${healthInfo.category == 'PUBLIC_CENTER'}">
                                <label class="form-check-label" for="cat1">보건소 소식</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="category" id="cat2" value="VACCINATION_CHECKUP"
                                       th:checked="${healthInfo.category == 'VACCINATION_CHECKUP'}">
                                <label class="form-check-label" for="cat2">예방접종/검진</label>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <label class="form-label">출처 타입</label><br>
                        <div class="form-check form-check-inline mr-3">
                            <input class="form-check-input" type="radio" name="sourceType" id="src1" value="PUBLIC_CENTER"
                                   th:checked="${healthInfo.sourceType == 'PUBLIC_CENTER'}">
                            <label class="form-check-label" for="src1">보건소</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="sourceType" id="src2" value="MEDICAL_SITE"
                                   th:checked="${healthInfo.sourceType == 'MEDICAL_SITE'}">
                            <label class="form-check-label" for="src2">의료기관</label>
                        </div>
                    </div>
                </div>

                <div class="form-group mb-4">
                    <label for="content" class="form-label">내용</label>
                    <textarea class="form-control" id="content" rows="12"
                              style="line-height: 1.6; resize: none;" th:text="${healthInfo.content}" required></textarea>
                </div>

                <div class="text-right border-top pt-4">
                    <a th:href="@{/healthinfo/{id}(id=${healthInfo.id})}" class="btn btn-outline-secondary px-4 mr-2">취소</a>
                    <button type="button" class="btn btn-update" onclick="updateData()">수정 완료</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!--  푸터  -->
<div th:replace="~{mainpage/footer :: footer}"></div>

<!--  JS : Axios 글 수정  -->
<script th:src="@{/js/healthinfo/healthinfomodify.js}"></script>

</body>
</html>